<!-- templates/auctions/user_lots.html -->

{% extends 'base.html' %}
{% block page_id %}user_lots{% endblock %}
{% block content %}
<h1>Мои лоты</h1>

<h2>Активные лоты</h2>
<div id="active-lots">
    {% for lot in active_lots %}
    <div class="card">
        <div class="card-body">
            <h5>{{ lot.title }}</h5>
            <p>Текущая цена: {{ lot.current_price|default:"Нет ставок" }}</p>
            <a href="{% url 'lot_detail' lot.pk %}" class="btn btn-primary">Подробнее</a>
        </div>
    </div>
    {% empty %}
    <p>Нет активных лотов.</p>
    {% endfor %}
</div>

<h2>Завершенные лоты</h2>
<div id="finished-lots">
    {% for lot in finished_lots %}
    <div class="card">
        <div class="card-body">
            <h5>{{ lot.title }}</h5>
            <p>Финальная цена: {{ lot.current_price|default:"Нет ставок" }}</p>
            <h6>Последние 3 участника:</h6>
            <ul>
                {% for bid in recent_bidders|dictsort:lot.pk %}
                <li>{{ bid.user.username }} - {{ bid.amount }}</li>
                {% empty %}
                <li>Ставок не было</li>
                {% endfor %}
            </ul>
            <a href="{% url 'lot_detail' lot.pk %}" class="btn btn-primary">Подробнее</a>
        </div>
    </div>
    {% empty %}
    <p>Нет завершенных лотов.</p>
    {% endfor %}
</div>
{% endblock %}